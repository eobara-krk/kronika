<main>
  <div class="placeholder">

    <!-- DATA I GODZINA -->
    <div class="top-right-datetime">
      <div class="date-line">{{ currentDateTime | date:'EEEE dd.MM.yyyy':'':'pl-PL' }} r.</div>
    </div>

    <!-- HEADER -->
    <div class="header">
      <h1>Kronika spotkaÅ„</h1>
      <p>Spotkania w salce, rekolekcje i inne wydarzenia</p>
    </div>

    <div class="divider"></div>

    <!-- EVENTY -->
    <div *ngFor="let item of items; trackBy: trackByTitle" class="event-card">
      <div class="event-header" (click)="toggle(item)">
        <span>ğŸ“Œ {{ item.title }}</span>
        <span>{{ item.show ? 'â–²' : 'â–¼' }}</span>
      </div>

      <div class="pill-group" *ngIf="item.show">

        <!-- Obrazek wydarzenia w osobnym div -->
<!-- Obrazek wydarzenia w osobnym div -->
<div class="event-image-container" *ngIf="item.image" style="position: relative;">
  <img [src]="item.image"
       alt="Obraz wydarzenia"
       class="event-image"
       (click)="toggleImage(item)" />

  <!-- overlay fullscreen -->
  <div *ngIf="item.fullscreen" class="fullscreen-overlay" (click)="toggleImage(item)">
    <img [src]="item.image" class="fullscreen-image" />
  </div>
</div>


        <!-- Spotkania z podziaÅ‚em na daty -->
        <ng-container *ngIf="item.meetings">
          <div *ngFor="let meeting of item.meetings" class="event-card meeting-card" style="margin-left: 1rem;">
            <div class="event-header" (click)="toggle(meeting)">
              <span>ğŸ—“ {{ meeting.date }}</span>
              <span>{{ meeting.show ? 'â–²' : 'â–¼' }}</span>
            </div>

            <div class="link-grid" *ngIf="meeting.show">
              <ng-container *ngFor="let link of meeting.links; trackBy: trackByName">

                <!-- LINK Z EMOTKÄ„ -->
                <div class="grid-link" *ngIf="link.url && link.type !== 'opis'" (click)="openLink(link)">
                  <span [ngSwitch]="link.type">
                    <span *ngSwitchCase="'film'">ğŸ¬</span>
                    <span *ngSwitchCase="'foto'">ğŸ“·</span>
                    <span *ngSwitchCase="'audio'">ğŸµ</span>
                    <span *ngSwitchCase="'youtube'">ğŸ“º</span>
                    <span *ngSwitchCase="'html'">ğŸŒ</span>
                    <span *ngSwitchDefault>ğŸ“„</span>
                  </span>
                  {{ link.name }}
                </div>

                <!-- CHRONIONY OPIS -->
                <div class="grid-link protected-link description-link" 
                     *ngIf="link.type === 'opis' && link.protected"
                     (click)="toggleLink(link)">
                  ğŸ”’ {{ link.name }}
                  <div *ngIf="link.show && link.text" class="event-description">
                    <pre style="white-space: pre-wrap;">{{ link.text }}</pre>
                  </div>
                </div>

                <!-- ZWYKÅY OPIS -->
                <div class="grid-link description-link" 
                     *ngIf="link.type === 'opis' && !link.protected"
                     (click)="toggleLink(link)">
                  ğŸ“ {{ link.name }}
                  <div *ngIf="link.show && link.text" class="event-description">
                    <pre style="white-space: pre-wrap;">{{ link.text }}</pre>
                  </div>
                </div>

              </ng-container>
            </div>
          </div>
        </ng-container>

        <!-- ZWYKÅE LINKI (BEZ SPOTKAÅƒ) -->
        <div class="link-grid" *ngIf="item.links">
          <ng-container *ngFor="let link of item.links; trackBy: trackByName">

            <!-- LINK Z EMOTKÄ„ -->
            <div class="grid-link" *ngIf="link.url && link.type !== 'opis'" (click)="openLink(link)">
              <span [ngSwitch]="link.type">
                <span *ngSwitchCase="'film'">ğŸ¬</span>
                <span *ngSwitchCase="'foto'">ğŸ“·</span>
                <span *ngSwitchCase="'audio'">ğŸµ</span>
                <span *ngSwitchCase="'youtube'">ğŸ“º</span>
                <span *ngSwitchCase="'html'">ğŸŒ</span>
                <span *ngSwitchDefault>ğŸ“„</span>
              </span>
              {{ link.name }}
            </div>

            <!-- CHRONIONY OPIS -->
            <div class="grid-link protected-link description-link" 
                 *ngIf="link.type === 'opis' && link.protected"
                 (click)="toggleLink(link)">
              ğŸ”’ {{ link.name }}
              <div *ngIf="link.show && link.text" class="event-description">
                <pre style="white-space: pre-wrap;">{{ link.text }}</pre>
              </div>
            </div>

            <!-- ZWYKÅY OPIS -->
            <div class="grid-link description-link" 
                 *ngIf="link.type === 'opis' && !link.protected"
                 (click)="toggleLink(link)">
              ğŸ“ {{ link.name }}
              <div *ngIf="link.show && link.text" class="event-description">
                <pre style="white-space: pre-wrap;">{{ link.text }}</pre>
              </div>
            </div>

          </ng-container>
        </div>

      </div>
    </div>

    <!-- Dolny pasek -->
    <div style="margin-top: 1rem; position: relative; padding-top: 1rem; border-top: 1px solid #eee;">
      <button class="stylish-button" style="display: block; margin: 0 auto;" (click)="closePage()">Zamknij stronÄ™</button>
      <div class="znak-wodny">
        Â© <span class="ozdobne">EO</span>
      </div>
    </div>

  </div>
</main>
